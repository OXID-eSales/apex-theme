document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".zoom-container-magnifier").forEach(container=>{let img=container.querySelector("img"),lens=container.querySelector(".lens"),result=container.querySelector(".zoom-result-magnifier"),resultImg=result.querySelector("img");resultImg.src=img.src,container.addEventListener("mousemove",function(e){lens.style.display="block",result.style.display="block";var containerRect=container.getBoundingClientRect(),imgRect=img.getBoundingClientRect(),x=e.clientX-containerRect.left,e=e.clientY-containerRect.top;((lens,resultImg,containerRect,imgRect,x,y)=>{let lensWidth=lens.offsetWidth,lensHeight=lens.offsetHeight,cx=result.offsetWidth/lensWidth,cy=result.offsetHeight/lensHeight,lensX=x-lensWidth/2,lensY=y-lensHeight/2,imgOffsetX=(containerRect.width-imgRect.width)/2,imgOffsetY=(containerRect.height-imgRect.height)/2;lensX<imgOffsetX&&(lensX=imgOffsetX),lensY<imgOffsetY&&(lensY=imgOffsetY),lensX>imgOffsetX+imgRect.width-lensWidth&&(lensX=imgOffsetX+imgRect.width-lensWidth),lensY>imgOffsetY+imgRect.height-lensHeight&&(lensY=imgOffsetY+imgRect.height-lensHeight),lens.style.left=lensX+"px",lens.style.top=lensY+"px",x=-((lensX-imgOffsetX)*cx),lensY,imgOffsetY,cy,y=(imgRect.height*cy-result.offsetHeight)/2,containerRect=-y-(lensY-imgOffsetY)*cy,resultImg.style.width=imgRect.width*cx+"px",resultImg.style.height=imgRect.height*cy+"px",resultImg.style.top=y+"px",resultImg.style.transform=`translate(${x}px, ${containerRect}px)`})(lens,(img,resultImg),containerRect,imgRect,x,e)}),container.addEventListener("mouseleave",function(){lens.style.display="none",result.style.display="none"})})});