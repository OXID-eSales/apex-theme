!function(a){oxCountryStateSelect={options:{listItem:"li",select:"select",span:"span",selectedStateId:"selectedStateId"},_create:function(){var a=this,b=a.options,c=a.element,d=a.getStateSelect(c);a.manageStateSelect(d,a.getStates(c.val(),allStates,allCountryIds),a.getStatesValues(c.val(),allStateIds,allCountryIds),b.selectedStateId),c.change(function(){a.manageStateSelect(d,a.getStates(c.val(),allStates,allCountryIds),a.getStatesValues(c.val(),allStateIds,allCountryIds),b.selectedStateId)})},manageStateSelect:function(a,b,c,d){this.removeSelectOptions(a);var e=this.getStateSelectSpan(a);return null!=b&&b.length>0?(this.addSelectOptions(a,c,b,d),e.parent().show()):(e.parent().hide(),this.removeSelectOptions(a)),a},getStateSelect:function(b){return oOptions=this.options,a(b).closest(oOptions.listItem).next(oOptions.listItem).children(oOptions.span).children(oOptions.select)},getStateSelectSpan:function(b){return oOptions=this.options,a(b).parent(oOptions.span)},addSelectOptions:function(b,c,d,e){for(var f=0;f<c.length;f++)e==c[f]?b.append(a('<option selected="selected"></option>').attr("value",c[f]).text(d[f])):b.append(a("<option></option>").attr("value",c[f]).text(d[f]));return b},removeSelectOptions:function(a){return a.find('option[value!=""]').remove().end(),a},getStates:function(a,b,c){return b[c[a]]},getStatesValues:function(a,b,c){return b[c[a]]}},a.widget("ui.oxCountryStateSelect",oxCountryStateSelect)}(jQuery);