{% block details_productmain_zoom %}
    {% set imageCount = oView.getIcons()|length %}
    <div class="gallery">
        <div class="carousel">
            {% for iPicNr, oArtIcon in oView.getIcons() %}
                <input type="radio" class="gallery-helper" id="image{{ iPicNr }}" name="gallery-control"{% if loop.first %} checked{% endif %}>
            {% endfor %}

            {% if imageCount > 1 %}
                <div class="thumbnails">
                    {% for iPicNr, oArtIcon in oView.getIcons() %}
                        <label for="image{{ iPicNr }}" class="thumb">
                            <img loading="lazy" src="{{ oPictureProduct.getIconUrl(iPicNr)|raw }}" alt=" {{ translate({ ident: "PRODUCT_GALLERY_IMAGE_ALT", args: { "count": iPicNr, "title": oPictureProduct.oxarticles__oxtitle.value|striptags ~ ' ' ~ oPictureProduct.oxarticles__oxvarselect.value|striptags } }) }}" width="112" height="112">
                        </label>
                    {% endfor %}
                </div>
            {% endif %}

            <div class="wrap">
                {% for iPicNr, oArtIcon in oView.getIcons() %}
                    {% set sPictureName = oPictureProduct.getPictureFieldValue("oxpic", iPicNr) %}
                    {% set aPictureInfo = config.getMasterPicturePath("product/" ~ iPicNr ~ "/" ~ sPictureName)|getimagesize %}

                    <figure class="zoom-container">
                        <img src="{{ oPictureProduct.getMasterZoomPictureUrl(iPicNr)|raw }}" alt="{{ translate({ ident: "PRODUCT_GALLERY_IMAGE_ALT", args: { "count": iPicNr, "title": oPictureProduct.oxarticles__oxtitle.value|striptags ~ ' ' ~ oPictureProduct.oxarticles__oxvarselect.value|striptags } }) }}" data-bs-toggle="modal" data-bs-target="#imageModal{{ iPicNr }}"/>
                    </figure>

                    <!-- Modal -->
                    <div class="modal fade" id="imageModal{{ iPicNr }}" tabindex="-1" aria-labelledby="imageModalLabel{{ iPicNr }}" aria-hidden="true">
                        <div class="modal-dialog d-flex justify-content-center modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="imageModalLabel{{ iPicNr }}">{{ translate({ ident: 'PRODUCT_GALLERY_IMAGE_ALT', args: { 'count': iPicNr, 'title': oPictureProduct.oxarticles__oxtitle.value|striptags ~ ' ' ~ oPictureProduct.oxarticles__oxvarselect.value|striptags } }) }}</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body d-flex justify-content-center">
                                    <img src="{{ oPictureProduct.getMasterZoomPictureUrl(iPicNr)|raw }}" alt="{{ translate({ ident: 'PRODUCT_GALLERY_IMAGE_ALT', args: { 'count': iPicNr, 'title': oPictureProduct.oxarticles__oxtitle.value|striptags ~ ' ' ~ oPictureProduct.oxarticles__oxvarselect.value|striptags } }) }}" class="img-fluid">
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}